<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RPG Party Sync (Online)</title>
    
    <style>
        body { 
            font-family: sans-serif; 
            background-color: #121212 !important; /* ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡∏î‡∏≥ */
            color: #e0e0e0; 
            padding: 20px; 
            margin: 0; 
        }
        .container { max-width: 800px; margin: 0 auto; }
        h1 { color: #ffcc00; }
        .box { background: #333; padding: 20px; border-radius: 8px; margin-top: 20px; }
        .btn { padding: 10px 20px; background: #007bff; color: white; border: none; cursor: pointer; }
        .status { padding: 5px 10px; border-radius: 5px; font-weight: bold; display: inline-block; margin-bottom: 10px;}
        .online { background: #28a745; color: white; }
        .offline { background: #dc3545; color: white; }
    </style>
</head>
<body>

<div class="container">
    <div id="status" class="status offline">Connecting...</div>
    <h1>‚öîÔ∏è RPG Party Sync</h1>
    <p>‡∏ñ‡πâ‡∏≤‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ô‡∏µ‡πâ ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤ HTML/CSS ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏õ‡∏Å‡∏ï‡∏¥‡∏Ñ‡∏£‡∏±‡∏ö</p>
    
    <div class="box">
        <h3>‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏±‡∏ß‡∏•‡∏∞‡∏Ñ‡∏£ (Database Test)</h3>
        <button class="btn" onclick="testAddChar()">+ ‡∏•‡∏≠‡∏á‡∏Å‡∏î‡∏õ‡∏∏‡πà‡∏°‡∏ô‡∏µ‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ó‡∏î‡∏™‡∏≠‡∏ö</button>
        <div id="char-list" style="margin-top: 20px;">‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏£‡∏≠‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...</div>
    </div>
</div>

<script type="module">
    console.log("--- ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á Script ---"); // ‡∏ñ‡πâ‡∏≤ Console ‡∏ß‡πà‡∏≤‡∏á ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡πà‡∏≤ Script ‡πÑ‡∏°‡πà‡∏£‡∏±‡∏ô

    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
    import { getDatabase, ref, set, onValue, push } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

    // Config ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì
    const firebaseConfig = {
        apiKey: "AIzaSyBEw0zATJP-H1fFR6Lp979Q_z1xSV2q2ys",
        authDomain: "jtg-01t.firebaseapp.com",
        databaseURL: "https://jtg-01t-default-rtdb.asia-southeast1.firebasedatabase.app",
        projectId: "jtg-01t",
        storageBucket: "jtg-01t.firebasestorage.app",
        messagingSenderId: "45439731374",
        appId: "1:45439731374:web:93f808e462d1a791974f3f",
        measurementId: "G-PN807S1Y1H"
    };

    try {
        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);
        console.log("Firebase Initialized!");

        const dbRef = ref(db, 'testConnect');

        // ‡∏ü‡∏±‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
        onValue(dbRef, (snapshot) => {
            console.log("‡πÑ‡∏î‡πâ‡∏£‡∏±‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å Database:", snapshot.val());
            document.getElementById('status').innerText = "üü¢ Online Connected!";
            document.getElementById('status').className = "status online";
            
            const data = snapshot.val();
            const listDiv = document.getElementById('char-list');
            
            if(data) {
                listDiv.innerHTML = "‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡πà‡∏≤‡∏™‡∏∏‡∏î: " + JSON.stringify(data);
            } else {
                listDiv.innerHTML = "‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠‡πÑ‡∏î‡πâ‡πÅ‡∏•‡πâ‡∏ß (‡πÅ‡∏ï‡πà‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•)";
            }
        }, (error) => {
            console.error("Firebase Error:", error);
            document.getElementById('status').innerText = "üî¥ Error: " + error.message;
        });

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô
        window.testAddChar = () => {
            console.log("‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•...");
            set(ref(db, 'testConnect'), {
                msg: "Hello from Web!",
                time: new Date().toISOString()
            }).then(() => {
                alert("‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à! ‡∏î‡∏π‡∏´‡∏ô‡πâ‡∏≤‡∏à‡∏≠‡∏ß‡πà‡∏≤‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÑ‡∏´‡∏°");
            }).catch((err) => {
                alert("‡∏™‡πà‡∏á‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô: " + err.message);
            });
        }

    } catch (e) {
        console.error("Script Crash:", e);
        alert("Script Error: " + e.message);
    }
</script>

</body>
</html>
